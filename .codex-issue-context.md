Contexto de issue (precargado por orquestador):

Issue #20: PR-03 Flujo A procesar nota actual
URL: https://github.com/adrirobg/obsidian-master/issues/20

## Objetivo
Implementar flujo E2E de nota activa con revisar/aceptar/rechazar y control explicito del usuario.

## Referencia
- BrainOS/30-Implementation/MVP-04-PROCESAR-NOTA-ACTUAL.md
- BrainOS/20-Methodology-System/METHODOLOGY-VALIDATION-PLAYBOOK.md
- BrainOS/30-Implementation/NEXT-BLOCK-EXECUTION-CHECKLIST.md
- BrainOS/30-Implementation/NEXT-BLOCK-PLUGIN-RUNTIME-PLAN.md

## Alcance
- Comando Procesar nota actual con validaciones de precondicion.
- Prompt con contexto minimo de nota activa.
- UI de revision con progreso incremental.
- Aplicar cambios solo bajo aceptacion explicita y registrar decision.

## Criterios de aceptación
- Sin aceptar no hay escritura.
- Rechazar conserva contenido original.
- Fallo de runtime/red termina en estado seguro.
- Decision registrada en SessionStateManager.

## Fuera de alcance
- No auto-aplicar cambios sensibles.
- No Canvas en este bloque.

## Reglas adicionales
- Trabaja solo en la rama codex/issue-20-flow-a-current-note-runtime.
- Target de PR: codex/issue-flow-plugin-runtime.
- No iniciar hasta que issue #19 este mergeada en codex/issue-flow-plugin-runtime.
- Usa la skill [$brainos-obsidian-playbook](/Users/adri/.codex/skills/brainos-obsidian-playbook/SKILL.md) para UX, comandos, settings y guardrails del plugin.
- Cuando haya decisiones de contrato/runtime/eventos para el flujo, usa la skill [$brainos-opencode-playbook](/Users/adri/.codex/skills/brainos-opencode-playbook/SKILL.md).
- Si hay acoplamiento fuerte con RuntimeBridge, consumir interfaces publicas sin reescribir capas base.

Sigue AGENTS.md para flujo issue->dev->PR.
Trabaja solo en la rama codex/issue-20-flow-a-current-note-runtime
Implementa localmente, valida y deja cambios listos para PR con resumen de validación.
